@startuml
'skinparam
skinparam handwritten true
skinparam packageStyle rect
skinparam defaultFontName FG Virgil
skinparam shadowing false

'Entidades
class DeactivateBackofficeUserUI <<presentation>> {
- doShow()
- headline()
}
class DeactivateBackofficeUserController <<application>>{
- activeUsers()
- filterBackofficeUsers(users : Iterable<SystemUser>)
- deactivateUser(user : SystemUser)
}
class AuthorizationService <<service>> {
- ensureAuthenticatedUserHasAnyOf(roles : List<Jobs4uRoles>)
}
class UserManagementService <<service>> {
- activeUsers()
- deactivateUser (user : SystemUser)
}

class PersistenceContext <<persistence>> {
- repositories()
}
class RepositoryFactory <<factory>> {
- users()
}
class UserRepository <<repository>> {
- findByActive(true)
- save(user : SystemUser)
}
class SystemUser <<domain>> {
- deactivate(time : CurrenTime.Calendar.now())
}
'Associações
DeactivateBackofficeUserUI --> DeactivateBackofficeUserController : theController
DeactivateBackofficeUserController --> AuthorizationService : authz
DeactivateBackofficeUserController --> UserManagementService : userSvc
DeactivateBackofficeUserController --> SystemUser : deactivates
UserManagementService --> PersistenceContext : persistence
PersistenceContext --> RepositoryFactory : factory
RepositoryFactory --> UserRepository : userRepository

@enduml
